"use strict";(self.webpackChunkcampervoyage=self.webpackChunkcampervoyage||[]).push([[489],{1223:function(e,t,n){n.d(t,{Z:function(){return R}});var s=n(9434),r=n(6351),i=n(9439),a=n(2791),l=n(4164),c=n(9),o=n(5677),d=n(9348),_={modal_overlay:"ModalAdvert_modal_overlay__Xnqrm",description:"ModalAdvert_description__oCswk",container:"ModalAdvert_container__iXlnS",list_container:"ModalAdvert_list_container__YR9Rx",nav:"ModalAdvert_nav__LmytL",nav_link:"ModalAdvert_nav_link__ncSMK",accent:"ModalAdvert_accent__3sqSI",details_wrapper:"ModalAdvert_details_wrapper__A4QR6",details:"ModalAdvert_details__L+2ix"},u="AdvertItem_item__YDGtQ",m="AdvertItem_img__fGhaR",v="AdvertItem_content__Ar1Bl",h="AdvertItem_header__SnV1f",f="AdvertItem_price_wrapper__+eKUC",x="AdvertItem_info__4VCFs",j="AdvertItem_header_wrapper__XFtU3",p="AdvertItem_title__KcX0E",g="AdvertItem_price__WqeWv",N="AdvertItem_rating__5bu8I",w="AdvertItem_location__KBpyI",y="AdvertItem_icon__TwHqI",C="AdvertItem_rating_text__58lzI",A="AdvertItem_description__NGK06",F="AdvertItem_button_more__xrrwp",k="AdvertItem_img_wrapper__b3NgY",Z=n(184),b=function(e){var t=e.advert,n=(0,a.useState)("features"),s=(0,i.Z)(n,2),r=s[0],l=s[1];return(0,Z.jsxs)("div",{className:"".concat(_.modal_window," "),children:[(0,Z.jsx)("div",{children:(0,Z.jsxs)("div",{className:j,children:[(0,Z.jsxs)("div",{className:h,children:[(0,Z.jsx)("h2",{className:p,children:t.name}),(0,Z.jsx)("div",{className:f})]}),(0,Z.jsxs)("div",{className:x,children:[(0,Z.jsxs)("p",{className:N,children:[(0,Z.jsx)("svg",{className:y,width:16,height:16,children:(0,Z.jsx)("use",{xlinkHref:"".concat(d.Z,"#star")})}),(0,Z.jsxs)("span",{className:C,children:[t.rating," (",t.reviews.length," Reviews)"]})]}),(0,Z.jsx)("span",{className:w,children:t.location})]}),(0,Z.jsxs)("p",{className:g,children:["\u20ac",t.price.toFixed(2)]})]})}),(0,Z.jsx)("div",{className:_.container,children:(0,Z.jsxs)("div",{className:_.list_container,children:[(0,Z.jsx)("ul",{className:k,children:t.gallery.map((function(e){return(0,Z.jsx)("li",{children:(0,Z.jsx)("img",{className:m,src:e,alt:t.name,width:290,height:310})},e)}))}),(0,Z.jsx)("p",{className:"".concat(_.description," text"),children:t.description}),(0,Z.jsxs)("div",{className:_.nav,children:[(0,Z.jsx)("button",{className:"".concat(_.nav_link," ").concat("features"===r&&_.accent),onClick:function(){return l("features")},children:"Features"}),(0,Z.jsx)("button",{className:"".concat(_.nav_link," ").concat("rewiews"===r&&_.accent),onClick:function(){return l("rewiews")},children:"Reviews"})]}),(0,Z.jsx)("div",{className:_.details_wrapper,children:(0,Z.jsxs)("div",{className:_.details,children:["features"===r&&(0,Z.jsx)(o.Z,{advert:t}),"rewiews"===r&&(0,Z.jsx)(c.Z,{reviews:t.reviews})]})})]})})]})},S={overlay:"Modal_overlay__r63M6",modal:"Modal_modal__DJDMv",close_button:"Modal_close_button__4xTF9"},L=function(e){var t=e.children,n=e.advert,s=e.onClose;return(0,a.useEffect)((function(){var e=function(e){"Escape"===e.key&&s()},t=function(e){e.target.classList.contains(S.overlay)&&s()};return document.addEventListener("keydown",e),document.addEventListener("click",t),document.body.style.overflow="hidden",document.body.style.paddingRight="15px",function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t),document.body.style.overflow="auto",document.body.style.paddingRight="0"}}),[s]),l.createPortal((0,Z.jsx)("div",{className:S.overlay,children:(0,Z.jsxs)("div",{className:S.modal,children:[(0,Z.jsx)("button",{className:S.close_button,onClick:s,children:(0,Z.jsx)("svg",{className:S.modal_close_icon,width:32,height:32,children:(0,Z.jsx)("use",{href:"".concat(d.Z,"#close")})})}),(0,Z.jsx)("div",{className:S.content,children:t}),(0,Z.jsx)(b,{advert:n})]})}),document.getElementById("modal-root"))},I=n(9186),E=function(e){var t=e.advert,n=(0,a.useState)(!1),s=(0,i.Z)(n,2),r=s[0],l=s[1],c=t.id,o=t.name,_=t.price,k=t.location,b=t.description,S=t.details,E=t.rating,M=t.reviews,R=t.gallery;return(0,Z.jsxs)("li",{className:u,id:c,children:[(0,Z.jsx)("img",{className:m,src:R&&(null===R||void 0===R?void 0:R.length)&&R[0],alt:o,width:290,height:310,loading:"lazy"}),(0,Z.jsxs)("div",{className:v,children:[(0,Z.jsxs)("div",{className:j,children:[(0,Z.jsxs)("div",{className:h,children:[(0,Z.jsx)("h2",{className:p,children:o}),(0,Z.jsx)("div",{className:f,children:(0,Z.jsxs)("p",{className:g,children:["\u20ac",_.toFixed(2)]})})]}),(0,Z.jsxs)("div",{className:x,children:[(0,Z.jsxs)("p",{className:N,children:[(0,Z.jsx)("svg",{className:y,width:16,height:16,children:(0,Z.jsx)("use",{xlinkHref:"".concat(d.Z,"#star")})}),(0,Z.jsxs)("span",{className:C,children:[E," (",M.length," Reviews)"]})]}),(0,Z.jsx)("span",{className:w,children:k})]})]}),(0,Z.jsx)("p",{className:A,children:b}),(0,Z.jsx)(I.Z,{details:S}),(0,Z.jsx)("button",{className:F,onClick:function(){l(!0)},children:"Show more"}),r&&(0,Z.jsx)(L,{onClose:function(){l(!1)},advert:t})]})]})},M="AdvertList_list__s82Kb",R=function(e){var t=e.adverts,n=(0,s.v9)(r.xU),i=(0,s.v9)(r.zh);return n?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("p",{children:"Loading..."})}):i?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("p",{children:"Error!"})}):(0,Z.jsx)("ul",{className:M,children:t&&(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return(0,Z.jsx)(E,{advert:e},e.id)})):(0,Z.jsx)("p",{children:"No advertisements found"})})}},2489:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var s=n(9439),r=n(2791),i=n(9434),a=n(6351),l=n(1437),c=n(1223),o="AdvertsPagination_wrapper__4NiRi",d=n(184),_=function(e){var t=e.adverts,n=(0,r.useState)(4),l=(0,s.Z)(n,2),_=l[0],u=l[1],m=(0,i.v9)(a.xU);return(0,d.jsxs)("div",{className:o,children:[(0,d.jsx)(c.Z,{adverts:t.slice(0,_)}),!m&&_<t.length&&(0,d.jsx)("button",{onClick:function(){u((function(e){return e+4}))},children:"Load more"})]})},u=n(7762);var m=n(9348),v="CityAutoComplete_location__rs4bb",h="CityAutoComplete_wrapper__r8lTw",f="CityAutoComplete_title__YDFYo",x="CityAutoComplete_icon__8ygvX",j="CityAutoComplete_input_location__5n7JZ",p="CityAutoComplete_list__LYMkA",g="CityAutoComplete_item__wnH9C",N=function(e){var t=e.cities,n=e.onCitySelect,i=(0,r.useState)(""),a=(0,s.Z)(i,2),l=a[0],c=a[1],o=(0,r.useState)([]),_=(0,s.Z)(o,2),u=_[0],N=_[1],w=(0,r.useState)(!1),y=(0,s.Z)(w,2),C=y[0],A=y[1],F=(0,r.useState)(!1),k=(0,s.Z)(F,2),Z=k[0],b=k[1],S=(0,r.useRef)(null);(0,r.useEffect)((function(){return document.addEventListener("click",L),function(){document.removeEventListener("click",L)}}),[]);var L=function(e){S.current.contains(e.target)||N([])};return(0,d.jsxs)("div",{className:v,ref:S,children:[(0,d.jsx)("h3",{className:f,children:"Location"}),(0,d.jsxs)("div",{className:h,children:[(0,d.jsx)("svg",{className:x,width:18,height:20,children:(0,d.jsx)("use",{xlinkHref:"".concat(m.Z,"#geo")})}),(0,d.jsx)("input",{className:j,type:"text",value:l,onChange:function(e){var s=e.target.value;if(c(s),s.length>0){var r=t.filter((function(e){return e.toLowerCase().includes(s.toLowerCase())}));N(r),A(!1),b(!1)}else N(t),A(!1),b(!0),n([])},onKeyDown:function(e){"Escape"===e.key&&(N([]),S.current.blur())},onBlur:function(){l.length>0&&!u.includes(l)&&A(!0)},placeholder:"Enter the name of the Ukrainian city"}),u.length>0&&(0,d.jsx)("ul",{className:p,children:u.map((function(e,t){return(0,d.jsx)("li",{className:g,onClick:function(){return function(e){c(e),N([]),A(!1),n(e)}(e)},children:e},t)}))}),C&&!Z&&(0,d.jsx)("p",{style:{color:"red"},children:"\u041c\u0456\u0441\u0442\u043e \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0454"})]})]})},w=n(3433),y=n(7583),C="DetailFilter_details_filter__hwsFd",A="DetailFilter_title__7fOFN",F="DetailFilter_subtitle__1Azag",k="DetailFilter_details_list__E8USp",Z="DetailFilter_details_item__8VBxi",b="DetailFilter_form_text__yPRPt",S="DetailFilter_details_item__selected__wGrYB",L=function(e){var t=e.detailKeys,n=e.onFilterSelect,i=(0,r.useState)([]),a=(0,s.Z)(i,2),l=a[0],c=a[1];return(0,r.useEffect)((function(){console.log(l),n(l)}),[n,l]),(0,d.jsxs)("div",{className:C,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:F,children:"Filters"}),(0,d.jsx)("h2",{className:A,children:"Vehicle equipment"})]}),(0,d.jsx)("ul",{className:k,children:t.map((function(e){return(0,d.jsx)("li",{children:(0,d.jsxs)("button",{className:"".concat(Z," ").concat(l.includes(e)?S:""),onClick:function(){!function(e){var t=l.includes(e)?l.filter((function(t){return t!==e})):[].concat((0,w.Z)(l),[e]);c(t)}(e)},children:[(0,d.jsx)("svg",{width:32,height:32,children:(0,d.jsx)("use",{xlinkHref:"".concat(m.Z,"#").concat(e.toLowerCase())})}),(0,d.jsx)("span",{className:b,children:(0,y.Z)(e)})]})},e)}))})]})},I="FormFilter_form_filter__NJjft",E="FormFilter_title__BPbds",M="FormFilter_form_list__OwKzW",R="FormFilter_form_item__vQuBH",D="FormFilter_form_item__selected__zLOY8",K="FormFilter_form_text__Aa3UE",Y=function(e){var t=e.formKeys,n=e.onFilterSelect,i=(0,r.useState)(""),a=(0,s.Z)(i,2),l=a[0],c=a[1];return(0,r.useEffect)((function(){n(l?[l]:[])}),[n,l]),(0,d.jsxs)("div",{className:I,children:[(0,d.jsx)("h2",{className:E,children:"Vehicle type"}),(0,d.jsx)("ul",{className:M,children:t.map((function(e){return(0,d.jsx)("li",{children:(0,d.jsxs)("button",{className:"".concat(R," ").concat(e===l?D:""),onClick:function(){var t;t=e,c((function(e){return e===t?"":t}))},children:[(0,d.jsx)("svg",{width:32,height:32,children:(0,d.jsx)("use",{xlinkHref:"".concat(m.Z,"#").concat(e.toLowerCase())})}),(0,d.jsx)("span",{className:K,children:(0,y.Z)(e)})]})},e)}))})]})},U=function(e){var t=e.onClick,n=e.disabled;return(0,d.jsx)("button",{onClick:t,disabled:n,children:"Search"})},B=function(e){var t=e.adverts,n=e.setFilteredAdverts,i=(0,r.useMemo)((function(){return function(e){var t,n=new Set,s=new Set,r=new Set,i=(0,u.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;for(var l in a.details)n.add(l);var c=a.location.split(", ")[1];s.add(c),r.add(a.form)}}catch(d){i.e(d)}finally{i.f()}var o=function(e){return Array.from(e).sort((function(e,t){return e-t}))};return{details:n=o(n),location:s=o(s),form:r=o(r)}}(t)}),[t]),a=(0,r.useState)(""),l=(0,s.Z)(a,2),c=l[0],o=l[1],_=(0,r.useState)([]),m=(0,s.Z)(_,2),v=m[0],h=m[1],f=(0,r.useState)(""),x=(0,s.Z)(f,2),j=x[0],p=x[1];return(0,d.jsxs)("div",{children:[(0,d.jsx)(N,{cities:i.location,onCitySelect:o}),(0,d.jsx)(L,{detailKeys:i.details,onFilterSelect:h}),(0,d.jsx)(Y,{formKeys:i.form,onFilterSelect:p}),(0,d.jsx)(U,{onClick:function(){var e=t;c.length>0&&(e=e.filter((function(e){return e.location.includes(c)}))),console.log(v.length,e),v.length>0&&(e=e.filter((function(e){return v.every((function(t){return e.details[t]}))}))),j.length>0&&(e=e.filter((function(e){return e.form.includes(j)}))),n(e)}})]})},G=n(9033),H=function(){var e=(0,r.useState)(null),t=(0,s.Z)(e,2),n=t[0],c=t[1],o=(0,i.I0)(),u=(0,i.v9)(a.OG);return(0,r.useEffect)((function(){o((0,l.G)())}),[o]),console.log(n),(0,d.jsxs)("div",{className:G.Z.wrapper,children:[(0,d.jsxs)("section",{className:G.Z.filter,children:[(0,d.jsx)("h1",{className:"visually_hidden",children:"Filter"}),(0,d.jsx)(B,{adverts:u,setFilteredAdverts:c})]}),(0,d.jsxs)("section",{className:G.Z.catalog,children:[(0,d.jsx)("h1",{className:"visually_hidden",children:"Catalog"}),(0,d.jsx)(_,{adverts:n||u})]})]})}},6351:function(e,t,n){n.d(t,{OG:function(){return s},Tc:function(){return a},xU:function(){return r},zh:function(){return i}});var s=function(e){return e.adverts.items},r=function(e){return e.adverts.isLoading},i=function(e){return e.adverts.error},a=function(e){return e.favorites}},9033:function(e,t){t.Z={wrapper:"pages_wrapper__jX0rS",wrapper_home:"pages_wrapper_home__xLQCv",container:"pages_container__-MxLQ",homepage:"pages_homepage__8WurU",catalog:"pages_catalog__gtlyf",filter:"pages_filter__2Yf-p",homepage_text:"pages_homepage_text__-x5RM",text_wrapper:"pages_text_wrapper__cVyuy",title:"pages_title__EC3Ll",button_link:"pages_button_link__JYPGP"}}}]);
//# sourceMappingURL=489.86514d4f.chunk.js.map