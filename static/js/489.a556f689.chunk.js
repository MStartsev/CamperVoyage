"use strict";(self.webpackChunkcampervoyage=self.webpackChunkcampervoyage||[]).push([[489],{1223:function(e,t,n){n.d(t,{Z:function(){return B}});var s=n(9434),r=n(6351),i=n(9439),a=n(2791),l=n(4164),c=n(9),o=n(5677),d=n(9348),_={modal_overlay:"ModalAdvert_modal_overlay__Xnqrm",description:"ModalAdvert_description__oCswk",container:"ModalAdvert_container__iXlnS",list_container:"ModalAdvert_list_container__YR9Rx",nav:"ModalAdvert_nav__LmytL",nav_link:"ModalAdvert_nav_link__ncSMK",accent:"ModalAdvert_accent__3sqSI",details_wrapper:"ModalAdvert_details_wrapper__A4QR6",details:"ModalAdvert_details__L+2ix"},u="AdvertItem_item__YDGtQ",m="AdvertItem_img__fGhaR",v="AdvertItem_content__Ar1Bl",h="AdvertItem_header__SnV1f",f="AdvertItem_price_wrapper__+eKUC",x="AdvertItem_info__4VCFs",p="AdvertItem_header_wrapper__XFtU3",j="AdvertItem_title__KcX0E",g="AdvertItem_price__WqeWv",N="AdvertItem_rating__5bu8I",w="AdvertItem_location__KBpyI",y="AdvertItem_icon__TwHqI",C="AdvertItem_rating_text__58lzI",A="AdvertItem_description__NGK06",k="AdvertItem_img_wrapper__b3NgY",F=n(184),Z=function(e){var t=e.advert,n=(0,a.useState)("features"),s=(0,i.Z)(n,2),r=s[0],l=s[1];return(0,F.jsxs)("div",{className:"".concat(_.modal_window," "),children:[(0,F.jsx)("div",{children:(0,F.jsxs)("div",{className:p,children:[(0,F.jsxs)("div",{className:h,children:[(0,F.jsx)("h2",{className:j,children:t.name}),(0,F.jsx)("div",{className:f})]}),(0,F.jsxs)("div",{className:x,children:[(0,F.jsxs)("p",{className:N,children:[(0,F.jsx)("svg",{className:y,width:16,height:16,children:(0,F.jsx)("use",{xlinkHref:"".concat(d.Z,"#star")})}),(0,F.jsxs)("span",{className:C,children:[t.rating," (",t.reviews.length," Reviews)"]})]}),(0,F.jsx)("span",{className:w,children:t.location})]}),(0,F.jsxs)("p",{className:g,children:["\u20ac",t.price.toFixed(2)]})]})}),(0,F.jsx)("div",{className:_.container,children:(0,F.jsxs)("div",{className:_.list_container,children:[(0,F.jsx)("ul",{className:k,children:t.gallery.map((function(e){return(0,F.jsx)("li",{children:(0,F.jsx)("img",{className:m,src:e,alt:t.name,width:290,height:310})},e)}))}),(0,F.jsx)("p",{className:"".concat(_.description," text"),children:t.description}),(0,F.jsxs)("div",{className:_.nav,children:[(0,F.jsx)("button",{className:"".concat(_.nav_link," ").concat("features"===r&&_.accent),onClick:function(){return l("features")},children:"Features"}),(0,F.jsx)("button",{className:"".concat(_.nav_link," ").concat("rewiews"===r&&_.accent),onClick:function(){return l("rewiews")},children:"Reviews"})]}),(0,F.jsx)("div",{className:_.details_wrapper,children:(0,F.jsxs)("div",{className:_.details,children:["features"===r&&(0,F.jsx)(o.Z,{advert:t}),"rewiews"===r&&(0,F.jsx)(c.Z,{reviews:t.reviews})]})})]})})]})},b={overlay:"Modal_overlay__r63M6",modal:"Modal_modal__DJDMv",close_button:"Modal_close_button__4xTF9"},S=function(e){var t=e.children,n=e.advert,s=e.onClose;return(0,a.useEffect)((function(){var e=function(e){"Escape"===e.key&&s()},t=function(e){e.target.classList.contains(b.overlay)&&s()};return document.addEventListener("keydown",e),document.addEventListener("click",t),document.body.style.overflow="hidden",document.body.style.paddingRight="15px",function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t),document.body.style.overflow="auto",document.body.style.paddingRight="0"}}),[s]),l.createPortal((0,F.jsx)("div",{className:b.overlay,children:(0,F.jsxs)("div",{className:b.modal,children:[(0,F.jsx)("button",{className:b.close_button,onClick:s,children:(0,F.jsx)("svg",{className:b.modal_close_icon,width:32,height:32,children:(0,F.jsx)("use",{href:"".concat(d.Z,"#close")})})}),(0,F.jsx)("div",{className:b.content,children:t}),(0,F.jsx)(Z,{advert:n})]})}),document.getElementById("modal-root"))},L=n(9186),E=n(9894),I=function(e){var t=e.advert,n=(0,a.useState)(!1),s=(0,i.Z)(n,2),r=s[0],l=s[1],c=t.id,o=t.name,_=t.price,k=t.location,Z=t.description,b=t.details,I=t.rating,M=t.reviews,B=t.gallery;return(0,F.jsxs)("li",{className:u,id:c,children:[(0,F.jsx)("img",{className:m,src:B&&(null===B||void 0===B?void 0:B.length)&&B[0],alt:o,width:290,height:310,loading:"lazy"}),(0,F.jsxs)("div",{className:v,children:[(0,F.jsxs)("div",{className:p,children:[(0,F.jsxs)("div",{className:h,children:[(0,F.jsx)("h2",{className:j,children:o}),(0,F.jsx)("div",{className:f,children:(0,F.jsxs)("p",{className:g,children:["\u20ac",_.toFixed(2)]})})]}),(0,F.jsxs)("div",{className:x,children:[(0,F.jsxs)("p",{className:N,children:[(0,F.jsx)("svg",{className:y,width:16,height:16,children:(0,F.jsx)("use",{xlinkHref:"".concat(d.Z,"#star")})}),(0,F.jsxs)("span",{className:C,children:[I," (",M.length," Reviews)"]})]}),(0,F.jsx)("span",{className:w,children:k})]})]}),(0,F.jsx)("p",{className:A,children:Z}),(0,F.jsx)(L.Z,{details:b}),(0,F.jsx)(E.EC,{onClick:function(){l(!0)},children:"Show more"}),r&&(0,F.jsx)(S,{onClose:function(){l(!1)},advert:t})]})]})},M="AdvertList_list__s82Kb",B=function(e){var t=e.adverts,n=(0,s.v9)(r.xU),i=(0,s.v9)(r.zh);return n?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("p",{children:"Loading..."})}):i?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("p",{children:"Error!"})}):(0,F.jsx)("ul",{className:M,children:t&&(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return(0,F.jsx)(I,{advert:e},e.id)})):(0,F.jsx)("p",{children:"No advertisements found"})})}},9894:function(e,t,n){n.d(t,{EC:function(){return l},Gz:function(){return a}});var s="Button_accent_btn__BdPoK Button_primary_btn__AqE5e",r="Button_ligth_btn__VuCBi Button_primary_btn__AqE5e",i=n(184),a=function(e){var t=e.children,n=e.onClick;return(0,i.jsx)("button",{className:r,type:"button",onClick:n,children:t})},l=function(e){var t=e.children,n=e.onClick;return(0,i.jsx)("button",{className:s,type:"button",onClick:n,children:t})}},2489:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var s=n(9439),r=n(2791),i=n(9434),a=n(6351),l=n(1437),c=n(9894),o=n(1223),d="AdvertsPagination_wrapper__4NiRi",_=n(184),u=function(e){var t=e.adverts,n=(0,r.useState)(4),l=(0,s.Z)(n,2),u=l[0],m=l[1],v=(0,i.v9)(a.xU);return(0,_.jsxs)("div",{className:d,children:[(0,_.jsx)(o.Z,{adverts:t.slice(0,u)}),!v&&u<t.length&&(0,_.jsx)(c.Gz,{onClick:function(){m((function(e){return e+4}))},children:"Load more"})]})},m=n(7762);var v=n(9348),h="CityAutoComplete_location__rs4bb",f="CityAutoComplete_wrapper__r8lTw",x="CityAutoComplete_title__YDFYo",p="CityAutoComplete_icon__8ygvX",j="CityAutoComplete_input_location__5n7JZ",g="CityAutoComplete_list__LYMkA",N="CityAutoComplete_item__wnH9C",w=function(e){var t=e.cities,n=e.onCitySelect,i=(0,r.useState)(""),a=(0,s.Z)(i,2),l=a[0],c=a[1],o=(0,r.useState)([]),d=(0,s.Z)(o,2),u=d[0],m=d[1],w=(0,r.useState)(!1),y=(0,s.Z)(w,2),C=y[0],A=y[1],k=(0,r.useState)(!1),F=(0,s.Z)(k,2),Z=F[0],b=F[1],S=(0,r.useRef)(null);(0,r.useEffect)((function(){return document.addEventListener("click",L),function(){document.removeEventListener("click",L)}}),[]);var L=function(e){S.current.contains(e.target)||m([])};return(0,_.jsxs)("div",{className:h,ref:S,children:[(0,_.jsx)("h3",{className:x,children:"Location"}),(0,_.jsxs)("div",{className:f,children:[(0,_.jsx)("svg",{className:p,width:18,height:20,children:(0,_.jsx)("use",{xlinkHref:"".concat(v.Z,"#geo")})}),(0,_.jsx)("input",{className:j,type:"text",value:l,onChange:function(e){var s=e.target.value;if(c(s),s.length>0){var r=t.filter((function(e){return e.toLowerCase().includes(s.toLowerCase())}));m(r),A(!1),b(!1)}else m(t),A(!1),b(!0),n([])},onKeyDown:function(e){"Escape"===e.key&&(m([]),S.current.blur())},onBlur:function(){l.length>0&&!u.includes(l)&&A(!0)},placeholder:"City"}),u.length>0&&(0,_.jsx)("ul",{className:g,children:u.map((function(e,t){return(0,_.jsx)("li",{className:N,onClick:function(){return function(e){c(e),m([]),A(!1),n(e)}(e)},children:e},t)}))}),C&&!Z&&(0,_.jsx)("p",{style:{color:"red"},children:"\u041c\u0456\u0441\u0442\u043e \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0454"})]})]})},y=n(3433),C=n(7583),A="DetailFilter_details_filter__hwsFd",k="DetailFilter_title__7fOFN",F="DetailFilter_subtitle__1Azag",Z="DetailFilter_details_list__E8USp",b="DetailFilter_details_item__8VBxi",S="DetailFilter_form_text__yPRPt",L="DetailFilter_details_item__selected__wGrYB",E=function(e){var t=e.detailKeys,n=e.onFilterSelect,i=(0,r.useState)([]),a=(0,s.Z)(i,2),l=a[0],c=a[1];return(0,r.useEffect)((function(){console.log(l),n(l)}),[n,l]),(0,_.jsxs)("div",{className:A,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("h3",{className:F,children:"Filters"}),(0,_.jsx)("h2",{className:k,children:"Vehicle equipment"})]}),(0,_.jsx)("ul",{className:Z,children:t.map((function(e){return(0,_.jsx)("li",{children:(0,_.jsxs)("button",{className:"".concat(b," ").concat(l.includes(e)?L:""),onClick:function(){!function(e){var t=l.includes(e)?l.filter((function(t){return t!==e})):[].concat((0,y.Z)(l),[e]);c(t)}(e)},children:[(0,_.jsx)("svg",{width:32,height:32,children:(0,_.jsx)("use",{xlinkHref:"".concat(v.Z,"#").concat(e.toLowerCase())})}),(0,_.jsx)("span",{className:S,children:(0,C.Z)(e)})]})},e)}))})]})},I="FormFilter_form_filter__NJjft",M="FormFilter_title__BPbds",B="FormFilter_form_list__OwKzW",K="FormFilter_form_item__vQuBH",R="FormFilter_form_item__selected__zLOY8",D="FormFilter_form_text__Aa3UE",G=function(e){var t=e.formKeys,n=e.onFilterSelect,i=(0,r.useState)(""),a=(0,s.Z)(i,2),l=a[0],c=a[1];return(0,r.useEffect)((function(){n(l?[l]:[])}),[n,l]),(0,_.jsxs)("div",{className:I,children:[(0,_.jsx)("h2",{className:M,children:"Vehicle type"}),(0,_.jsx)("ul",{className:B,children:t.map((function(e){return(0,_.jsx)("li",{children:(0,_.jsxs)("button",{className:"".concat(K," ").concat(e===l?R:""),onClick:function(){var t;t=e,c((function(e){return e===t?"":t}))},children:[(0,_.jsx)("svg",{width:32,height:32,children:(0,_.jsx)("use",{xlinkHref:"".concat(v.Z,"#").concat(e.toLowerCase())})}),(0,_.jsx)("span",{className:D,children:(0,C.Z)(e)})]})},e)}))})]})},z=function(e){var t=e.adverts,n=e.setFilteredAdverts,i=(0,r.useMemo)((function(){return function(e){var t,n=new Set,s=new Set,r=new Set,i=(0,m.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;for(var l in a.details)n.add(l);var c=a.location.split(", ")[1];s.add(c),r.add(a.form)}}catch(d){i.e(d)}finally{i.f()}var o=function(e){return Array.from(e).sort((function(e,t){return e-t}))};return{details:n=o(n),location:s=o(s),form:r=o(r)}}(t)}),[t]),a=(0,r.useState)(""),l=(0,s.Z)(a,2),o=l[0],d=l[1],u=(0,r.useState)([]),v=(0,s.Z)(u,2),h=v[0],f=v[1],x=(0,r.useState)(""),p=(0,s.Z)(x,2),j=p[0],g=p[1];return(0,_.jsxs)("div",{children:[(0,_.jsx)(w,{cities:i.location,onCitySelect:d}),(0,_.jsx)(E,{detailKeys:i.details,onFilterSelect:f}),(0,_.jsx)(G,{formKeys:i.form,onFilterSelect:g}),(0,_.jsx)(c.Gz,{onClick:function(){var e=t;o.length>0&&(e=e.filter((function(e){return e.location.includes(o)}))),console.log(h.length,e),h.length>0&&(e=e.filter((function(e){return h.every((function(t){return e.details[t]}))}))),j.length>0&&(e=e.filter((function(e){return e.form.includes(j)}))),n(e)},children:" Search "})]})},Y=n(9033),H=function(){var e=(0,r.useState)(null),t=(0,s.Z)(e,2),n=t[0],c=t[1],o=(0,i.I0)(),d=(0,i.v9)(a.OG);return(0,r.useEffect)((function(){o((0,l.G)())}),[o]),console.log(n),(0,_.jsxs)("div",{className:Y.Z.wrapper,children:[(0,_.jsxs)("section",{className:Y.Z.filter,children:[(0,_.jsx)("h1",{className:"visually_hidden",children:"Filter"}),(0,_.jsx)(z,{adverts:d,setFilteredAdverts:c})]}),(0,_.jsxs)("section",{className:Y.Z.catalog,children:[(0,_.jsx)("h1",{className:"visually_hidden",children:"Catalog"}),(0,_.jsx)(u,{adverts:n||d})]})]})}},6351:function(e,t,n){n.d(t,{OG:function(){return s},Tc:function(){return a},xU:function(){return r},zh:function(){return i}});var s=function(e){return e.adverts.items},r=function(e){return e.adverts.isLoading},i=function(e){return e.adverts.error},a=function(e){return e.favorites}},9033:function(e,t){t.Z={wrapper:"pages_wrapper__jX0rS",wrapper_home:"pages_wrapper_home__xLQCv",container:"pages_container__-MxLQ",homepage:"pages_homepage__8WurU",catalog:"pages_catalog__gtlyf",filter:"pages_filter__2Yf-p",homepage_text:"pages_homepage_text__-x5RM",text_wrapper:"pages_text_wrapper__cVyuy",title:"pages_title__EC3Ll",button_link:"pages_button_link__JYPGP"}}}]);
//# sourceMappingURL=489.a556f689.chunk.js.map